<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>Expressiveness Benchmark</title><meta name="viewport" content="initial-scale=1.0, width=device-width"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-16662292-3"></script><script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag(&#x27;js&#x27;, new Date());

        gtag(&#x27;config&#x27;, &#x27;UA-16662292-3&#x27;);
      </script><meta name="next-head-count" content="5"/><link rel="preload" href="/expressiveness-benchmark/_next/static/css/1633a8259df73d2136b7.css" as="style"/><link rel="stylesheet" href="/expressiveness-benchmark/_next/static/css/1633a8259df73d2136b7.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/main-f76717e2d376ecc40880.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/webpack-95c2b224bccf352ee870.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/framework.be9133c4aa54b58ca1d2.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/commons.2ac40408ef03d6c65327.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/pages/_app-ea0c602c710293d33739.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/48fe5443.8cbf9bb7b72041d99e6c.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/29107295.0ba1e3749ecd6faab06a.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/f7f3ae4b7ca4f7fc373506a61db832ad86bd3f74.d5e83ddfb8ec0326feec.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/pages/analysis-06d977c7106d15dde25c.js" as="script"/></head><body><div id="__next"><div id="container"><div class="title"><h1><a href="/expressiveness-benchmark">Expressiveness Benchmark</a></h1><nav><a href="/expressiveness-benchmark">Task matrix</a><a href="/expressiveness-benchmark/analysis">Dataset analysis</a></nav></div><div class="analysis"><h2>Dataset analysis</h2><div class="column-container big"><div class="main-content"><h3><a id="question-1" name="question-1">1<!-- -->. <!-- -->Overall, how concise are programs in each language and category?</a></h3><p>Our goal is to use quantitative metrics to compare the conciseness of programs in each language. We use <strong>number of tokens</strong> to measure program length. For example, the program &quot;<code>(var_name + 1) * 2</code>&quot; has the tokens &quot;<code>[(, var_name, +, 1, ), *, 2]</code>&quot; for a length of 7. Using tokens instead of lines-of-code or number of characters helps control for stylistic differences in indentation, and it does not penalize e.g. longer variable names. The boxplots below show the distribution of the number of tokens in programs for each category, sorted by median.</p><div></div><div></div><h3><a id="question-2" name="question-2">2<!-- -->. <!-- -->For a given language, what are its most and least concise tasks?</a></h3><p>To compare languages within categories, we take each task and assign its programs a <a href="https://en.wikipedia.org/wiki/Standard_score">z-score</a> based on length. The z-score tells us: for a given task (e.g. <a href="/expressiveness-benchmark/task/youngest_over_35">Youngest over 35</a>), how does program&#x27;s size in one language compare to other languages? A high z-score means a larger program than normal, and low z-score is smaller. Because the z-score is normalized, we can compare z-scores across multiple tasks. A language&#x27;s highest z-score is its worst category, and lowest z-score is its best category. Below we plot the z-scores for each language and category (z-scores within a given category/language pair are averaged).</p><div></div><p>To understand these statistics, let&#x27;s dig into an example. For <strong>Datalog</strong>, its best category is <strong>Joins</strong> and worst category is <strong>Strings</strong>. Here are the two Datalog join programs:</p><div class="program-row"><div class="program-container"><strong><a href="/expressiveness-benchmark/task/tom_hanks">Directors of movies Tom Hanks starred in</a></strong><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:115px"></div></div><pre style="width:100%;height:115px;line-height:1.3em">

tom_hanks(Director):-
  actors(&quot;Tom Hanks&quot;,movie),
  directors(Director,movie).
</pre></div></div><div class="program-container"><strong><a href="/expressiveness-benchmark/task/row_per_child">Row per family to row per child</a></strong><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:138px"></div></div><pre style="width:100%;height:138px;line-height:1.3em">row_per_child(&quot;child1&quot;, dob, family, height) :-
  families(dob, _, _, family, height, _, _).
row_per_child(&quot;child2&quot;, dob, family, height) :-
  families(_, dob, _, family, _, height, _).
row_per_child(&quot;child3&quot;, dob, family, height) :-
  families(_, _, dob, family, _, _, height).</pre></div></div></div><p>Datalog has more concise programs for joins because relationships between tables are implicitly expressed by sharing variables across tables. By contrast, languages like SQL require explicit <code>JOIN</code> clauses. But if we look to <strong>Strings</strong>, we can see when Datalog gets verbose:</p><div class="program-row"><div class="program-container"><strong><a href="/expressiveness-benchmark/task/documents_with_infrequent_words">Documents with infrequent words</a></strong><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:506px"></div></div><pre style="width:100%;height:506px;line-height:1.3em">.decl substrs(Text:symbol, Idx:number, Len:number)
substrs(Text, 0, 1) :- 
  documents(_, Text), strlen(Text) &gt; 0.
substrs(Text, 0, Len+1) :- 
  substrs(Text, 0, Len), Len + 1 &lt;= strlen(Text).
substrs(Text, Idx+1, Len) :- 
  substrs(Text, Idx, Len), Idx + Len + 1 &lt;= strlen(Text).

.decl token(Docid:number, Text:symbol, Idx:number, Word:symbol)
token(Docid, Text, Idx, Word) :-
  documents(Docid, Text),
  substrs(Text, Idx, Len),
  Prev = Idx - 1, Next = Idx + Len,
  (Prev &lt; 0; &quot; &quot; = substr(Text, Prev, 1)),
  (Next = strlen(Text); &quot; &quot; = substr(Text, Next, 1)),
  Word = substr(Text, Idx, Len),
  !contains(&quot; &quot;, Word).

documents_with_infrequent_words(Id) :-
  documents(Id, _),
  token(Id, _, _, Word),
  1 = count : token(_, _, _, Word).</pre></div></div><div class="program-container"><strong><a href="/expressiveness-benchmark/task/strings_to_numbers">Convert strings with different formats to numbers</a></strong><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:322px"></div></div><pre style="width:100%;height:322px;line-height:1.3em">.decl clean(Format:symbol, Inp:symbol, I:number, Outp:symbol) 
clean(Format, Inp, 0, &quot;&quot;) :- numbers(Format, Inp).
clean(Format, Inp, I+1, Outp) :-
  clean(Format, Inp, I, Outp_rec),
  I &lt;= strlen(Inp),
  Chr = substr(Inp, I, 1),
  ((Format = &quot;comma_sep&quot;, Sep = &quot;,&quot;);
   (Format = &quot;under_sep&quot;, Sep = &quot;_&quot;)),
  ((Chr  = Sep, Outp = Outp_rec);
   (Chr != Sep, Outp = cat(Outp_rec, Chr))).

strings_to_numbers(N) :-
  clean(Format, Inp, strlen(Inp), Outp),
  N = to_number(Outp).</pre></div></div></div><p>The main issue is that Datalog (i.e. Souffle) does not have many built-in primitives for string process like splitting or removing characters, so re-implementing those primitives requires a lot of code.</p><h3><a id="question-3" name="question-3">3<!-- -->. <!-- -->For a given task, what are its most and least concise languages?</a></h3><p>To answer this question, we can transpose the previous analysis. For each category, we can compare the z-scores for different languages, shown below.</p><div></div><p><strong>Python - Imperative</strong> has the most verbose programs for every category except <strong>Strings</strong>. The most concise programs vary mostly between <strong>SQL</strong>, <strong>R</strong>, and <strong>Q</strong>.</p></div><div class="sidebar"><div class="sidebar-sticky"><strong>Table of contents</strong><ol><li><a href="#question-1">Overall, how concise are programs in each language and category?</a></li><li><a href="#question-2">For a given language, what are its most and least concise tasks?</a></li><li><a href="#question-3">For a given task, what are its most and least concise languages?</a></li></ol></div></div></div></div><footer>Project by <a href="https://twitter.com/wcrichton">Will Crichton</a>, Scott Kovach, and Gleb Shevchuk.</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/analysis","query":{},"buildId":"QZSV_pIYn7_Nl1TDuGiZk","assetPrefix":"/expressiveness-benchmark","nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/expressiveness-benchmark/_next/static/chunks/polyfills-d2769c16f665abc9d1ae.js"></script><script src="/expressiveness-benchmark/_next/static/chunks/main-f76717e2d376ecc40880.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/webpack-95c2b224bccf352ee870.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/framework.be9133c4aa54b58ca1d2.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/commons.2ac40408ef03d6c65327.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/pages/_app-ea0c602c710293d33739.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/48fe5443.8cbf9bb7b72041d99e6c.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/29107295.0ba1e3749ecd6faab06a.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/f7f3ae4b7ca4f7fc373506a61db832ad86bd3f74.d5e83ddfb8ec0326feec.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/pages/analysis-06d977c7106d15dde25c.js" async=""></script><script src="/expressiveness-benchmark/_next/static/QZSV_pIYn7_Nl1TDuGiZk/_buildManifest.js" async=""></script><script src="/expressiveness-benchmark/_next/static/QZSV_pIYn7_Nl1TDuGiZk/_ssgManifest.js" async=""></script></body></html>