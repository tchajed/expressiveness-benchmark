{"task": "changing_mean", "language": "r", "plan": {"remove": [{"line": 4, "start": 43, "end": 65}], "orig": [{"line": 4, "start": 38, "end": 43}, {"line": 4, "start": 65, "end": 66}, {"line": 4, "start": 24, "end": 35}, {"line": 2, "start": 3, "end": 34}], "new": [{"line": 4, "start": 36, "end": 37}, {"line": 4, "start": 5, "end": 24}, {"line": 4, "start": 66, "end": 68}], "first": [{"line": 7, "start": 5, "end": 29}, {"line": 8, "start": 5, "end": 13}, {"line": 3, "start": 3, "end": 16}, {"line": 5, "start": 5, "end": 17}], "diff": [{"line": 6, "start": 5, "end": 34}]}, "source": "library(data.table)\nchanging_mean <- function(vals) {\n   global_mean <- mean(vals$value)\n   setDT(vals)[, \n     mean_change := abs(global_mean - mean(vals[id != .BY, value])), \n     by = id] %>%\n     filter(mean_change < 0.1) %>%\n     slice(which.min(id)) %>%\n     pull(id)\n}", "author": "g", "implementation": ""}